<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="utf-8">
		<title>Официальные дилеры Мастер Керамик</title>
		<meta name="description" content="о чем страница">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
		<script>
			let viewport = document.querySelector("meta[name=viewport]");
			var is_safari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
			
				//- alert(navigator.userAgent);
				function w() {
					this.outerWidth > 767.98
						? viewport.content = "width=768,   maximum-scale=1 , user-scalable=0, shrink-to-fit=no" 
						: viewport.content = "width=device-width, initial-scale=1.0,  maximum-scale=1.0, user-scalable=0, shrink-to-fit=no" 
					//- alert(this.outerWidth + ', '+  viewport.content);
				}
					w();
				window.addEventListener('resize', () => { 
					w();
				}, { passive: true });
		</script>
		<link type="image/ico" href="img/favicon.ico" rel="shortcut icon"><meta name="format-detection" content="telephone=no"> <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
		<link href="libs/malihu-custom-scrollbar-plugin/jquery.mCustomScrollbar.css" rel="stylesheet"/>
		<link href="css/main.min.css" rel="stylesheet"/>
		<script>
			function addBlock(elem) {
				fetch(`parts/${elem}.html`)
					.then(response => response.text())
					.then( text => {
						const wrap = document.querySelector(`#${elem}Wrap`);
						wrap.insertAdjacentHTML('afterend', text);
						wrap.previousElementSibling.remove()
						wrap.remove();
					});
			}
		</script>
	</head>
	<body class="main-page">
		<div class="main-wrapper">
			<script>addBlock(`header`)</script>
			<div id="headerWrap"></div>
			<main>
				<!-- start headerBlock-->
				<div class="headerBlock headerBlock--white section" id="headerBlock">
					<div class="headerBlock__img-wrap bg-wrap bg"><img class="object-fit-js" src="img/header-bg-distributors.png" alt="" loading="lazy"/>
					</div>
					<div class="container">
						<div class="section-title">
							<h1>Официальные дилеры Мастер Керамик</h1>
						</div>
					</div>
				</div>
				<!-- end headerBlock-->
				<!-- start sMap-->
				<section class="sMap section white-section" id="sMap">
					<div class="brands white-bg-modal" id="brands">
						<div class="container">
							<div class="brands__wrap">
								<a class="brands__item active" href="#"><img src="img/edelhaus.svg" alt="" loading="lazy"/>
								</a>
								<a class="brands__item" href="#"><img src="img/konigstein-dark-1.svg" alt="" loading="lazy"/>
								</a>
								<a class="brands__item" href="#"><img src="img/master-ceramic-dark.svg" alt="" loading="lazy"/>
								</a>
								<a class="brands__item" href="#"><img src="img/modformat-dark.svg" alt="" loading="lazy"/>
								</a>
							</div>
						</div>
					</div>
					<div class="container">
						<h4>Выберите регион</h4>
						<div class="sMap__cities">
							<div class="region-link region-link--big"><a href="#">Москва</a>
							</div>
							<div class="region-link region-link--big"><a href="#">Санкт-Петербург</a>
							</div>
							<div class="sMap__grid">
								<div class="region-link small" data-title="A"><a href="#">Адыгея Республика</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Алтайский край</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Амурская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Архангельская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Астраханская область</a>
								</div>
								<div class="region-link small" data-title="Б"><a href="#">Башкортостан республика</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Беларусь Республика</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Белгородская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Брянская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Бурятия Республика</a>
								</div>
								<div class="region-link small" data-title="В"><a href="#">Владимирская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Волгоградская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Вологодская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Воронежская область</a>
								</div>
								<div class="region-link small" data-title="Г"><a href="#">г. Севастополь</a>
								</div>
								<div class="region-link small" data-title="В"><a href="#">Владимирская область</a>
								</div>
								<div class="region-link small" data-title="Д"><a href="#">Дагестан Республика</a>
								</div>
								<div class="region-link small" data-title="Е"><a href="#">Еврейская автономная область</a>
								</div>
								<div class="region-link small" data-title="З"><a href="#">Забайкальский край</a>
								</div>
								<div class="region-link small" data-title="И"><a href="#">Ивановская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Ингушетия Республика</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Иркутская область</a>
								</div>
								<div class="region-link small" data-title="К"><a href="#">Казахстан Республика</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Калининградская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Камчатский край</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Карелия Республика</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Кемеровская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Кировская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Коми Республика</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Костромская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Краснодарский край</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Курганская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Курская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Кыргызская Республика</a>
								</div>
								<div class="region-link small" data-title="Л"><a href="#">Ленинградская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Липецкая область</a>
								</div>
								<div class="region-link small" data-title="М"><a href="#">Магаданская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Марий Эл Республика</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Мордовия Республика</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Московская область</a>
								</div>
								<div class="region-link small" data-title="Н"><a href="#">Ненецкий автономный округ</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Нижегородская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Новгородская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Новосибирская область</a>
								</div>
								<div class="region-link small" data-title="О"><a href="#">Омская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Оренбургская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Орловская область</a>
								</div>
								<div class="region-link small" data-title="П"><a href="#">Пензенская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Пермский край</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Приморский край</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Псковская область</a>
								</div>
								<div class="region-link small" data-title="Р"><a href="#">Ростовская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Рязанская область</a>
								</div>
								<div class="region-link small" data-title="С"><a href="#">Самарская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Саратовская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Сахалинская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Свердловская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Северная Осетия Республика</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Смоленская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Ставропольский край</a>
								</div>
								<div class="region-link small" data-title="Т"><a href="#">Тамбовская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Татарстан Республика</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Тверская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Томская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Тульская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Тыва Республика</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Тюменская область</a>
								</div>
								<div class="region-link small" data-title="У"><a href="#">Удмуртская Республика</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Узбекистан Республика</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Ульяновская область</a>
								</div>
								<div class="region-link small" data-title="Х"><a href="#">Хабаровский край</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Хакасия Республика</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Ханты-Мансийский автономный округ</a>
								</div>
								<div class="region-link small" data-title="Ч"><a href="#">Челябинская область</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Чеченская Республика</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Чувашская Республика</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Чукотский автономный округ</a>
								</div>
								<div class="region-link small" data-title="Я"><a href="#">Якутия Республика</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Ямало-Ненецкий автономный округ</a>
								</div>
								<div class="region-link small" data-title=""><a href="#">Ярославская область</a>
								</div>
							</div>
						</div>
						<div class="sMap__item" id="storage">
							<div class="sMap__row row">
								<div class="col-12 col-md-8 order-md-2">
									<div class="sMap__map">
										<div id="map"></div>
									</div>
								</div>
								<div class="col-12 col-md-4">
									<div class="inner-wrap">
										<div class="title fw-500">Москва и Московская область</div>
										<div class="custom-scroll">
											<div class="box">
												<div class="coord-item">
													<div class="coord-item__title">Склад основной на заводе
													</div>
													<div class="coord-item__item-text">
														<div class="coord-item__info-address small"><span>Адрес</span>: Кирово-Чепецкий район, посёлок при станции Бумкомбинат, Кирпичный проезд, 1
														</div>
														<div class="coord-item__info-address small"><span>Тел.:</span> 58.467892, 50.063425
														</div>
														<div class="coord-item__info-address small"><span>Viber/WhatsApp:</span> 
														</div>
														<div class="coord-item__info-address small"><span>E-mail:</span> 
														</div>
														<div class="coord-item__info-address small"><span>Сайт:</span> 
														</div>
													</div>
												</div>
												<div class="coord-item">
													<div class="coord-item__title">Склад УМИАТ
													</div>
													<div class="coord-item__item-text">
														<div class="coord-item__info-address small"><span>Адрес</span>: Кирово-Чепецк, квартал Пригородный
														</div>
														<div class="coord-item__info-address small"><span>Тел.:</span> 58.527740, 49.984161
														</div>
														<div class="coord-item__info-address small"><span>Viber/WhatsApp:</span> 
														</div>
														<div class="coord-item__info-address small"><span>E-mail:</span> 
														</div>
														<div class="coord-item__info-address small"><span>Сайт:</span> 
														</div>
													</div>
												</div>
												<div class="coord-item">
													<div class="coord-item__title">Склад База ОРС
													</div>
													<div class="coord-item__item-text">
														<div class="coord-item__info-address small"><span>Адрес</span>: г. Кирово-Чепецк, квартал Цепели, 18
														</div>
														<div class="coord-item__info-address small"><span>Тел.:</span> 58.517168, 50.004264
														</div>
														<div class="coord-item__info-address small"><span>Viber/WhatsApp:</span> 
														</div>
														<div class="coord-item__info-address small"><span>E-mail:</span> 
														</div>
														<div class="coord-item__info-address small"><span>Сайт:</span> 
														</div>
													</div>
												</div>
												<div class="coord-item">
													<div class="coord-item__title">Склад «Славянский мир»
													</div>
													<div class="coord-item__item-text">
														<div class="coord-item__info-address small"><span>Адрес</span>: Москва, поселение Мосрентген, строительный рынок «Славянский мир»
														</div>
														<div class="coord-item__info-address small"><span>Тел.:</span> 55.621473,37.450197
														</div>
														<div class="coord-item__info-address small"><span>Viber/WhatsApp:</span> 
														</div>
														<div class="coord-item__info-address small"><span>E-mail:</span> 
														</div>
														<div class="coord-item__info-address small"><span>Сайт:</span> 
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</section>
				<!-- end sMap-->
			</main>
			<script>addBlock(`footer`)</script>
			<div id="footerWrap"></div>
		</div>
		<!--  start modals-->
		<div id="modal-call" style="display: none">
			<div class="modal-win">
				<div class="form-wrap">
					<form>
						<div class="text-center">
							<div class="form-wrap__title form-data h3 ttu">Обратный звонок
							</div>
							<p class="after-headline">Заполните заявку и&nbsp;мы&nbsp;с&nbsp;Вами свяжемся в&nbsp;течение 15&nbsp;минут</p>
						</div>
						<div class="form-wrap__input-wrap form-group"><input class="form-wrap__input form-control" inputmode="text" name="text" type="text" placeholder="Ваше Имя" required="required"/>
						</div>
						<!-- +e.input-wrap-->
						<div class="form-wrap__input-wrap form-group"><input class="form-wrap__input form-control" inputmode="tel" name="tel" type="tel" placeholder="Ваше телефон" required="required"/>
						</div>
						<!-- +e.input-wrap-->
						<div class="form-wrap__input-wrap form-group"><input class="form-wrap__input form-control" inputmode="tel" name="tel" type="tel" placeholder="Ваше телефон" required="required"/>
						</div>
						<!-- +e.input-wrap-->
						<button class="form-wrap__btn btn" type="submit">submit
						</button>
						<div class="form-wrap__policy">
							<label class="custom-input form-check"><input class="custom-input__input form-check-input" name="checkbox" type="checkbox" checked="checked"/><small class="custom-input__text text-secondary">Согласен на обработку и хранение моих персональных данных в соответствии с условиями</small>
							</label>
						</div>
						<div class="form-wrap__policy">
							<label class="custom-input form-check"><input class="custom-input__input form-check-input" name="checkbox" type="checkbox" checked="checked"/><small class="custom-input__text text-secondary">Согласен на обработку и хранение моих персональных данных в соответствии с условиями</small>
							</label>
						</div>
					</form>
				</div>
			</div>
		</div>
		<!-- #modal-call-->
		<!-- end modals-->
		<script src="libs/gsap/gsap.min.js"></script>
		<script src="libs/gsap/ScrollTrigger.min.js"> </script>
		<script type="module" src="js/common.js"></script>
		<script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;apikey=2066e304-cee0-4ed2-9cb2-5f6521d5f96c"> </script>
		<script>
var myMap, objectManager

function initMap() { 
	var center = [58.468137, 50.064164];
	myMap = new ymaps.Map('map', {
		center: center,
		zoom: 7,
		clusterize: true,
		gridSize: 34,
		controls: ['zoomControl']
	});

	objectManager = new ymaps.ObjectManager({
		// Чтобы метки начали кластеризоваться, выставляем опцию.
		clusterize: true,
		// ObjectManager принимает те же опции, что и кластеризатор.
		gridSize: 34,
		clusterDisableClickZoom: true
});
objectManager.objects.options.set('preset', 'islands#redDotIcon');
		objectManager.clusters.options.set('preset', 'islands#redClusterIcons');
				// Чтобы задать опции одиночным объектам и кластерам,
		// обратимся к дочерним коллекциям ObjectManager.
		objectManager.objects.options.set({
			iconLayout: 'default#image',
			iconImageHref: 'img/pin-map.svg',
			iconImageSize: [55, 24],
			iconImageOffset: [-24, -38]
		});
		// objectManager.clusters.options.set('preset', 'islands#redClusterIcons');

		myMap.geoObjects.add(objectManager)

		let points = [];
		let getPixelBounds = [];
		$.ajax({
			url: "data.json"
		}).done(function(data) {
			objectManager.add(data);
			points.push(data.features)
			objectManager.objects.options.set('balloonContentLayout', ymaps.templateLayoutFactory.createClass(
				'<div class="coord-item">' +
				`<div class="coord-item__title fw-600">{{properties.balloonContentHeader}}</div>` +
				'<div class="coord-item__item-text">' +
				'<div class="coord-item__info-address small"><span>Адрес</span>: {{properties.balloonContentBody}}</div>' +
				'<div class="coord-item__info-address small"><span>Тел:</span> {{properties.balloonContentFooter}}</div>' +
				'</div>' +
				'</div>'

		));

	let box = document.querySelector("#storage .box");
	for (i = 0; i < points[0].length; i++) {
		let title= points[0][i].properties.balloonContentHeader
		let address = points[0][i].properties.balloonContentBody
		let coords = points[0][i].geometry.coordinates
		let id = points[0][i].id
			let text = `
			<div class="coord-item" data-index="${i}" data-coords="${id}">
				<div class="coord-item__title">${title}
				</div>
				<div class="coord-item__item-text">
					<div class="coord-item__info-address small"><span>Адрес</span>: ${address}
					</div>
					<div class="coord-item__info-address small"><span>GPS координаты:</span> ${coords}
					</div>
				</div>
			</div>
		`
		box.insertAdjacentHTML('beforeend', text);
			// li[i].style.display = "";
	}
		// Устанавливаем обработчик события клика по объекту
		objectManager.objects.events.add('click', function (e) {
				var objectId = e.get('objectId');
				objectManager.objects.balloon.open(objectId);
		});
			getPixelBounds = objectManager.getPixelBounds();

			myMap.setBounds(myMap.geoObjects.getBounds(), {
				checkZoomRange: true
		});
		});

	let searchList = document.querySelector("#storage .inner-wrap"); 
	if (!searchList) return;
	searchList.addEventListener("click", (e) => {
		const target = e.target.closest(".coord-item")
		if (!target) return;
		showBaloon(target.dataset.index, target.dataset.coords)
	})

	function showBaloon(index, el) {
		var objectState = objectManager.getObjectState(el); 
		myMap.setCenter(points[0][index].geometry.coordinates, 8);

		myMap.geoObjects.add(objectManager);
				// if (objectState.isClustered) {
				//     // Сделаем так, чтобы указанный объект был "выбран" в балуне.
				//     objectManager.clusters.state.set('activeObject', objectManager.objects.getById(el));
				//     // Все сгенерированные кластеры имеют уникальные идентификаторы.
				//     // Этот идентификатор нужно передать в менеджер балуна, чтобы указать,
				//     // на каком кластере нужно показать балун.
				//     objectManager.clusters.balloon.open(objectState.cluster.id);
				// } else {
						objectManager.objects.balloon.open(el);
				// }
	}
	// searchList.addEventListener("click", function (e) {
	//   const target = e.target.closest(".coord-item")
	//   console.log(target);
	//   if (!target) return;
	//   e.preventDefault();
	//   showBaloon(target.dataset.index, target.dataset.coords)
	//   // ymaps.geoQuery(geoObjects).getClosestTo().balloon.open();  
	// })


	// let button = document.querySelector(".sRpnContent__search button");
	// button.addEventListener('click', function () {
	//   var filter, ul, li, a, i;
	//   filter = input.value.toUpperCase();
	//   let searchList = document.getElementById("myDropdown");
	//   li = searchList.querySelectorAll("li");

	//   for (i = 0; i < li.length; i++) {
	//     let txtValue = li[i].querySelector("a").innerText;
	//     if (txtValue.toUpperCase().indexOf(filter) > -1) {
	//       showBaloon(li[i].querySelector("a"))
	// 			document.querySelector(".sRpnContent__search-result").classList.remove('active');
	//     }
	//   }
	// })

};

ymaps.ready(initMap);
		</script>
	</body>
</html>